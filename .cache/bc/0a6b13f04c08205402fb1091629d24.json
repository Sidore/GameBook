{"id":"index.html","dependencies":[{"name":"./App.tsx","dynamic":true,"resolved":"/Users/v.sydorenko/Documents/GameBook/src/client/App.tsx","parent":"/Users/v.sydorenko/Documents/GameBook/src/client/index.html"}],"generated":{"html":"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <title>React + TypeScript</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n</head>\n<body>\n   <div id=\"app-container\"></div>\n\n  <!--<input type=\"text\" id=\"login\"> login <br>\n  <input type=\"text\" id=\"password\"> pass <br>\n  <input type=\"text\" id=\"email\"> email <br>\n  <input type=\"text\" id=\"room\"> new Room <br>\n\n  <button id=\"register\">register</button>\n  <button id=\"loginB\">login</button>\n\n   <button id=\"sender\">send json</button> \n  <button id=\"game\">try get room</button>\n  <button id=\"room1\">try create room</button>\n  <p id=\"output\">\n\n  </p>\n\n  <ul id=\"list\">\n\n  </ul>\n\n    <script>\n      let token = \"\";\n      let senderButton1 = document.getElementById(\"loginB\");\n      senderButton1.onclick = function(){\n          let req = new XMLHttpRequest();\n          req.open('POST', 'http://localhost:2503/api/auth'); \n          req.setRequestHeader(\"Content-Type\", \"application/json\");\n          req.onreadystatechange = function() {\n          if (req.readyState == 4) {\n              // if(req.status == 200) {\n                  document.getElementById(\"output\").innerHTML = req.responseText;\n                  console.log(JSON.parse(req.responseText));\n                  token = JSON.parse(req.responseText).token;\n              // }\n          }\n          };\n          console.log(\"login\")\n          req.send(JSON.stringify({\n              email : document.getElementById(\"email\").value,\n              password : document.getElementById(\"password\").value\n          }));\n      }\n  \n      let senderButton = document.getElementById(\"register\");\n      senderButton.onclick = function(){\n          let req = new XMLHttpRequest();\n          req.open('POST', 'http://localhost:2503/api/user'); \n          req.setRequestHeader(\"Content-Type\", \"application/json\");\n          req.onreadystatechange = function() {\n          if (req.readyState == 4) {\n              // if(req.status == 200) {\n                  document.getElementById(\"output\").innerHTML = req.responseText;\n                  console.log(JSON.parse(req.responseText));\n                  token = JSON.parse(req.responseText).token;\n              // }\n          }\n          };\n\n        //   console.log({\n        //     login : document.getElementById(\"login\").value,\n        //     password : document.getElementById(\"password\").value,\n        //     email : document.getElementById(\"email\").value,\n        // });\n          req.send(JSON.stringify({\n              name : document.getElementById(\"login\").value,\n              password : document.getElementById(\"password\").value,\n              email : document.getElementById(\"email\").value,\n          }));\n      }\n  \n      // let senderButton = document.getElementById(\"\");\n      // senderButton.onclick = function(){\n      //     let req = new XMLHttpRequest();\n      //     req.open('POST', '/login'); \n      //     req.setRequestHeader(\"Content-Type\", \"application/json\");\n      //     req.onreadystatechange = function() {\n      //     if (req.readyState == 4) {\n      //         if(req.status == 200) {\n      //             document.getElementById(\"output\").innerHTML = req.responseText;\n      //             console.log(JSON.parse(req.responseText));\n      //             token = JSON.parse(req.responseText).token;\n      //         }\n      //     }\n      //     };\n      //     req.send(JSON.stringify({\n      //         login : document.getElementById(\"login\").value,\n      //         password : document.getElementById(\"password\").value\n      //     }));\n      // }\n  \n      let gameButton = document.getElementById(\"game\");\n      gameButton.onclick = function(){\n          let req = new XMLHttpRequest();\n          req.open('GET', 'http://localhost:2503/api/gameroom'); \n          req.setRequestHeader(\"Content-Type\", \"application/json\");\n          req.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n          req.onreadystatechange = function() {\n          if (req.readyState == 4) {\n              if(req.status == 200) {\n\n                  const response = JSON.parse(req.responseText);\n                  const list = document.getElementById(\"list\");\n\n                  response.forEach(element => {\n                      let el = document.createElement(\"li\");\n                      el.innerHTML = element.name;\n                      list.appendChild( el );\n\n                      let btn = document.createElement(\"button\");\n                      btn.innerHTML = \"x\";\n                      btn.onclick = function() {\n                        let req1 = new XMLHttpRequest();\n                        req1.open('DELETE', 'http://localhost:2503/api/gameroom/' + element._id); \n                        req1.setRequestHeader(\"Content-Type\", \"application/json\");\n                        req1.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n                        req1.onreadystatechange = function() {\n                            if (req.readyState == 4) {\n                                if(req.status == 200) {\n                                    console.log(\"ok\");\n                                    list.removeChild(el);\n                                }\n                            }\n                        }\n                        req1.send();\n                      }\n\n                      el.appendChild( btn );\n                  });\n                  \n                //   .innerHTML = req.responseText;\n                  \n                  if (response.redirect) {\n                      setTimeout(() => {\n                          window.location.assign(response.redirect);\n                      }, 2000);\n                  }\n              }\n          }\n          };\n  \n          req.send();\n      }\n\n      let senderButton2 = document.getElementById(\"room1\");\n      senderButton2.onclick = function(){\n          let req = new XMLHttpRequest();\n          req.open('POST', 'http://localhost:2503/api/gameroom'); \n          req.setRequestHeader(\"Content-Type\", \"application/json\");\n          req.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n          req.onreadystatechange = function() {\n          if (req.readyState == 4) {\n              // if(req.status == 200) {\n                  document.getElementById(\"output\").innerHTML = req.responseText;\n                  console.log(JSON.parse(req.responseText));\n              // }\n          }\n          };\n          req.send(JSON.stringify({\n              name : document.getElementById(\"room\").value,\n          }));\n      }\n  </script>   -->\n  <script src=\"/fcd1e7eb6aa107e7a3e9f19604586683.js\"></script>\n</body>\n</html>"},"sourceMaps":null,"error":null,"hash":"077d31a7e2fa7a1c6cd98d81be36bfda","cacheData":{}}